<ul class="nav nav-tabs">
    <li class="active">
        <a href="#runningQuests" data-toggle="tab" aria-expanded="false">Running <span class="badge">{{runningExpeditions.length}}</span></a>
    </li>
    <li>
        <a href="#finishedQuests" data-toggle="tab" aria-expanded="false">Finished <span class="badge">{{completedExpeditions.length}}</span></a>
    </li>
</ul>
<div id="questTabContent" class="tab-content">
    <div class="tab-pane fade active in" id="runningQuests">
        <span v-if="runningExpeditions.length == 0" class="text-muted text-center col-xs-12">No running quests</span>
        <transition-group name="custom-classes-transition" enter-acti ve-class="animated fadeIn" leave-active-class="noOutAnimation">
            <div v-for="expedition in runningExpeditions" key="expedition.id">
                <div class="well well-sm">
                    <h4>{{expedition.contract.name}}</h4>
                    <ul>
                        <li v-for="adventurer in expedition.adventurers">
                            {{adventurer.type}} {{adventurer.status}} {{adventurer.awol}} {{adventurer.upgradedTo}}
                        </li>
                    </ul>
                    <div class="progress progress-striped active">
                        <div class="progress-bar" v-bind:style="{ width: expeditionProgress(expedition) + '%' }"></div>
                    </div>
                    <div v-bind:class="{ 'text-success': expiringDanger(expedition.expires), 'text-warning': expiringWarning(expedition.expires), 'text-danger': expiringSuccess(expedition.expires) }">{{readableTime(expedition.expires - Date.now())}} remaining</div>
                </div>
            </div>
        </transition-group>
    </div>
    <div class="tab-pane fade" id="finishedQuests">
        <span v-if="completedExpeditions.length == 0" class="text-muted text-center col-xs-12">No finished quests</span>
        <button v-if="claimAllVisible()" type="button" class="btn btn-success btn-xs pull-right" @click="claimAllCompletedExpeditions()">Claim All</button>
        <transition-group name="custom-classes-transition" enter-active-class="animated fadeIn" leave-active-class="noOutAnimation">
            <div class="panel panel-default" v-for="expedition in completedExpeditions" key="expedition.id">
                <div class="panel-heading">
                    <h3 class="panel-title">{{expedition.contract.name}}
                        <span v-if="expedition.success" class="text-success">- Success</span>
                        <span v-if="!expedition.success" class="text-danger">- Fail</span>
                        <button v-if="expedition.success" type="button" class="btn btn-xs btn-success pull-right" @click="claimReward(expedition)">Claim rewards</button>
                        <button v-if="!expedition.success" type="button" class="btn btn-xs btn-danger pull-right" @click="removeExpedition(expedition)">Dismiss</button>
                    </h3>
                </div>
                <div class="panel-body">
                    <span class="text-info">{{expedition.completionMessage}}</span>
                    <span v-if="expedition.casualaties.length !== 0" class="text-warning">{{expedition.contract.deathMessage}}</span>
                    <h4>Rewards</h4>
                    <div v-if="expedition.contract.contractAmount != undefined">{{expedition.contract.contractAmount}} coins</div>
                    <div v-for="reward in expedition.rewards">
                        <div class="text-success" v-if="reward.amount">{{reward.amount}} {{reward.type}}</div>
                        <div class="text-success" v-if="reward.type == 'item'">{{reward.item.name}}</div>
                    </div>
                    <div v-if="expedition.survivors.length !== 0">
                        <h4>Returned adventurers</h4>
                        <ul>
                            <li v-for="adventurer in expedition.survivors">
                                {{adventurer.name.full}} ({{adventurer.type}})
                            </li>
                        </ul>
                    </div>
                    <div v-if="expedition.casualaties.length !== 0">
                        <h4>Deaths</h4>
                        <ul>
                            <li v-for="adventurer in expedition.casualaties">
                                {{adventurer.name.full}} ({{adventurer.type}})
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </transition-group>
    </div>
</div>
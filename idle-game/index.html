<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Adventurers of Otium</title>
    <link rel="icon" type="image/png" href="img/favicon.png">

    <script src="./js/lib/jquery.js"></script>
    <script src="./js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="css/alertify.min.css" />
    <!-- <link rel="stylesheet" href="css/bootstrap-glyphicons.min.css" /> -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">
    <!-- Alertify Bootstrap theme -->
    <link rel="stylesheet" href="css/alertify.bootstrap.min.css" />

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap.slate.min.css" />
    <link rel="stylesheet" href="css/animate.css" />

    <!--This sets the baseUrl to the "scripts" directory, and
    loads a script that will have a module ID of 'main'-->
    <script data-main="js/app/idle-game-2.js" src="js/require.js"></script>
</head>

<body>
    <div id="AdventurersGame">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <span class="navbar-brand" href="#">
                        {{game.name}} <span class="text-muted">v{{version}}</span>
                    </span>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#" data-toggle="modal" data-target="#stats">Statistics</a></li>
                        <li><a href="#" data-toggle="modal" data-target="#achievements">Achievements</a></li>
                        <li><a href="#" data-toggle="modal" data-target="#options">Options</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="#" data-toggle="modal" data-target="#releaseNotes">Release Notes</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="https://jameshurburgh.github.io/about.html">About the Author</a></li>
                                <li><a href="https://www.patreon.com/bePatron?u=6205348" target="_blank">Become a Patron!</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Modal Achievements Box -->
        <div id="achievements" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4>Achievements</h4>
                    </div>
                    <div class="modal-body">
                        <table class="table table-striped table-hover ">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <!-- <th>Progress</th> -->
                                </tr>
                            </thead>
                            <tr v-for="achievement in achievements" v-bind:class="{ 'default': !hasAchievement(achievement), 'success': hasAchievement(achievement) }">
                                <td>{{achievement.name}}</td>
                                <td>{{achievement.description}}</td>
                                <td>
                                    <!-- <div class="progress progress-striped">
                                        <div class="progress-bar" v-bind:style="{ width: achievementProgress(achievement) + '%' }" v-bind:class="{ 'progress-bar-info': !hasAchievement(achievement), 'progress-bar-success': hasAchievement(achievement) }"></div>
                                    </div> -->
                                </td>
                            </tr>
                        </table>
                        <!--<img :src="'./img/' + achievement.icon" />-->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>

        <!-- Modal Stats Box -->
        <div id="stats" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4>Statistics</h4>
                    </div>
                    <div class="modal-body">

                        <div class="input">
                            <label>Filter
                                        <input type="input" v-model="options.statFilter"/>
                                    </label>
                        </div>
                        <table class="table table-striped table-hover ">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Current</th>
                                    <th>All Time</th>
                                </tr>
                            </thead>
                            <tr v-for="stat in filteredStats(options.statFilter)">
                                <td>{{stat.name}}</td>
                                <td>{{stat.current}}</td>
                                <td>{{stat.allTime}}</td>
                            </tr>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Options Box -->
        <div id="options" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4>Options</h4>
                    </div>
                    <div class="modal-body">
                        <button @click="reset()" type="button" class="btn btn-default" data-dismiss="modal">Reset the Game</button>

                        <div class="checkbox">
                            <label>
                                <input type="checkbox" v-model="options.claimAllButtons">Display "Claim All" Buttons</input>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" v-model="options.automaticHire">Automatically hire available adventurers</input>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" v-model="options.automaticClaim">Automatically claim completed expeditions</input>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" v-model="options.automaticSend">Automatically send available contracts</input>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" v-model="options.automaticRelocate">Automatically relocate to better locations</input>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" v-model="options.automaticFreeCoins">Automatically claim free coins</input>
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal About Box -->
        <div id="releaseNotes" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" @click="cheat()">Release History</h4>
                    </div>
                    <div class="modal-body">
                        <div class="list-group">
                            <div v-for="version in game.versions" class="list-group-item">
                                <h3 class="list-group-item-heading">{{version.number}}</h3>
                                <p class="list-group-item-text">{{version.description}}</p>
                                <h4>Features</h4>
                                <ul>
                                    <li v-for="feature in version.features">{{feature}}</li>
                                </ul>
                                <h4>Bug fixes</h4>
                                <ul>
                                    <li v-for="bugfix in version.bugfixes">{{bugfix}}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="container" style="padding-bottom: 65px; padding-top: 65px;">
            <div id="container" class="row">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a style="padding: 1px 2px;" href="#location" data-toggle="tab" aria-expanded="true">
                            <img width="32px;" src="../img/icons/family-house.png" />
                            <!-- <span class="hidden-md-down">Location</span> -->
                        </a>
                    </li>
                    <li class="">
                        <a style="padding: 1px 2px;" href="#contracts" data-toggle="tab" aria-expanded="false">
                            <img v-if="location.availableContracts.length == 0" width="32px;" src="../img/icons/stabbed-note.png" />
                            <img v-if="location.availableContracts.length != 0" width="32px;" src="../img/icons/stabbed-note-green.png" />
                            <!--<span class="badge">{{location.availableContracts.length}}</span>-->
                        </a>
                    </li>
                    <li class="">
                        <a style="padding: 1px 2px;" href="#adventurers" data-toggle="tab" aria-expanded="false">
                            <img v-if="location.availableHires.length == 0" width="32px;" src="../img/icons/stabbed-note-body.png" />
                            <img v-if="location.availableHires.length != 0" width="32px;" src="../img/icons/stabbed-note-body-green.png" />
                            <!--<span class="badge">{{location.availableHires.length}}</span>-->
                        </a>
                    </li>
                    <li class="">
                        <a style="padding: 1px 2px;" href="#finishedQuests" data-toggle="tab" aria-expanded="false">
                            <img v-if="completedExpeditions.length == 0" width="32px;" src="../img/icons/checklist.png" />
                            <img v-if="completedExpeditions.length != 0" width="32px;" src="../img/icons/checklist-green.png" />
                            <!--<span class="badge">{{completedExpeditions.length}}</span>-->
                        </a>
                    </li>
                    <li class="">
                        <a style="padding: 1px 2px;" href="#runningQuests" data-toggle="tab" aria-expanded="false">
                            <img width="32px;" src="../img/icons/sands-of-time.png" />
                            <!--<span class="badge">{{runningExpeditions.length}}</span>-->
                        </a>
                    </li>
                    <li class="">
                        <a style="padding: 1px 2px;" href="#hired" data-toggle="tab" aria-expanded="false">
                            <img width="32px;" src="../img/icons/robe.png" />
                        </a>
                    </li>
                    <li class="" v-if="!lessthan(items.length, 1)">
                        <a style="padding: 1px 2px;" href="#items" data-toggle="tab" aria-expanded="false">
                            <img width="32px;" src="../img/icons/backpack.png" />
                            <!--<span class="badge">{{location.availableHires.length}}</span>-->
                        </a>
                    </li>
                    <li class="">
                        <a style="padding: 1px 2px;" href="#messages" data-toggle="tab" aria-expanded="false">
                            <img v-if="messages.length == 0" width="32px;" src="../img/icons/scroll-unfurled.png" />
                            <img v-if="messages.length != 0" width="32px;" src="../img/icons/scroll-unfurled-green.png" />
                            <!--<span class="badge">{{messages.length}}</span>-->
                        </a>
                    </li>
                </ul>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade active in" id="location">
                        <div class="col-xs-12">
                            <h2>
                                {{location.name}}
                            </h2>
                        </div>

                        <div class="col-xs-12">
                            <div class="col-xs-12 col-sm-8">
                                <span>{{location.description}}</span>
                            </div>
                            <div class="col-xs-12 col-sm-4">
                                <div class="pull-right">
                                    <button type="button" class="btn btn-default" v-bind:class="{ 'btn-success': canRelocateUp(), 'btn-primary': !canRelocateUp() }" @click="relocateUp()" :disabled="!canRelocateUp()">
                                            Relocate
                                            <span class="glyphicon glyphicon-chevron-right"></span>
                                        </button>
                                </div>

                                <div class="pull-right">
                                    <button type="button" class="btn btn-primary pull-right" v-bind:class="{ 'btn-success': canGetFreeCoins(), 'btn-primary': !canGetFreeCoins() }" @click="freeCoins(location)" :disabled="!canGetFreeCoins()">{{location.freeCoinsDescription}}</button>
                                </div>
                                <div class="pull-right">
                                    <button type="button" class="btn btn-default" v-bind:class="{ 'btn-success': canRelocateDown(), 'btn-primary': !canRelocateDown() }" @click="relocateDown()" :disabled="!canRelocateDown()">
                                                <span class="glyphicon glyphicon-chevron-left"></span>
                                                Relocate
                                            </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="contracts">
                        <button v-if="startAllVisible()" type="button" class="btn btn-success btn-xs pull-right" @click="startAllContracts()">Start All</button>
                        <transition-group name="custom-classes-transition" enter-active-class="animated fadeIn" leave-active-class="noOutAnimation">
                            <div v-for="contract in location.availableContracts" key="contract.name">
                                <div class="well well-sm">
                                    <h4>{{contract.name}} <button type="button" class="btn btn-sm pull-right" v-bind:class="{ 'btn-success': canSendExpedition(contract), 'btn-primary': !canSendExpedition(contract) }" @click="sendExpedition(contract)" :disabled="!canSendExpedition(contract)">Start</button>
                                    </h4>
                                    <div v-if="contract.contractAmount != undefined">{{contract.contractAmount}} coins</div>
                                    <div v-if="contract.requirements != undefined">
                                        <div v-for="adventurerRequirement in contract.requirements.adventurers">
                                            {{adventurerRequirement.amount}} {{adventurerRequirement.type}} <span v-bind:class="{ 'text-danger': lessthan(getHiredCount(adventurerRequirement.type), adventurerRequirement.amount), 'text-success': !lessthan(getHiredCount(adventurerRequirement.type), adventurerRequirement.amount) }">({{getHiredCount(adventurerRequirement.type)}}/{{adventurerRequirement.amount}})</span>
                                        </div>
                                    </div>

                                    <div>Duration: {{Math.ceil(Math.sqrt(contract.duration)/42)}}/10</div>
                                    <div class="progress" style="height: 7px; margin-bottom: 0px;">
                                        <div class="progress-bar progress-bar-info" v-bind:style="{ width: Math.ceil(Math.sqrt(contract.duration)/42)*10 + '%' }"></div>
                                    </div>
                                    <div>Risk: {{Math.ceil(contract.risk * 10)}}/10</div>
                                    <div class="progress" style="height: 7px; margin-bottom: 0px;">
                                        <div class="progress-bar progress-bar-danger" v-bind:style="{ width: Math.ceil(contract.risk * 10) * 10 + '%' }"></div>
                                    </div>
                                    <div>Reward: {{Math.ceil(contract.rewardFactor * 10)}}/10</div>
                                    <div class="progress" style="height: 7px; margin-bottom: 0px;">
                                        <div class="progress-bar progress-bar-success" v-bind:style="{ width: Math.ceil(contract.rewardFactor * 10) * 10 + '%' }"></div>
                                    </div>
                                    <div v-bind:class="{ 'text-danger': expiringDanger(contract.expires), 'text-warning': expiringWarning(contract.expires), 'text-success': expiringSuccess(contract.expires) }">{{readableTime(contract.expires - Date.now())}} remaining</div>
                                </div>
                            </div>
                        </transition-group>
                    </div>
                    <div class="tab-pane fade" id="adventurers">
                        <button v-if="hireAllVisible()" type="button" class="btn btn-success btn-xs pull-right" @click="hireAll()">Hire All</button>
                        <transition-group name="custom-classes-transition" enter-active-class="animated fadeIn" leave-active-class="noOutAnimation">
                            <div v-for="adventurer in location.availableHires" key="adventurer.name">
                                <div class="well well-sm">
                                    <h4>{{adventurer.name}} <button type="button" class="btn btn-sm pull-right" v-bind:class="{ 'btn-success': canHire(adventurer.name), 'btn-primary': !canHire(adventurer.name) }" @click="hire(adventurer)" :disabled="!canHire(adventurer.name)">Hire ({{getCost(adventurer.name)}} coins)</button>
                                    </h4>
                                    <div v-bind:class="{ 'text-danger': expiringDanger(adventurer.expires), 'text-warning': expiringWarning(adventurer.expires), 'text-success': expiringSuccess(adventurer.expires) }">{{readableTime(adventurer.expires - Date.now())}} remaining</div>
                                </div>
                            </div>
                        </transition-group>
                    </div>
                    <div class="tab-pane fade" id="hired">
                        <table class="table table-striped table-hover ">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Idle</th>
                                    <th>Out</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tr v-for="adventurer in hiredAdventurers()">
                                <td>{{adventurer.plural}}</td>
                                <td>{{getHiredCount(adventurer.name)}}</td>
                                <td>{{getAdventurersOnTheJob(adventurer.name)}}</td>
                                <td>{{totalAdventurers(adventurer)}}</td>
                            </tr>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="items">
                        <table class="table table-striped table-hover ">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Value</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tr v-for="item in ownedItems">
                                <td>{{item.name}}</td>
                                <td><span v-if="item.value !== undefined">{{item.value}}</span></td>
                                <td>
                                    <button v-if="canSell(item)" @click="sellItem(item)" class="btn btn-xs btn-success pull-right">Sell</button>
                                    <button v-if="canUse(item)" @click="useItem(item)" class="btn btn-xs btn-info pull-right">Use</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="finishedQuests">
                        <button v-if="claimAllVisible()" type="button" class="btn btn-success btn-xs pull-right" @click="claimAllCompletedExpeditions()">Claim All</button>
                        <transition-group name="custom-classes-transition" enter-active-class="animated fadeIn" leave-active-class="noOutAnimation">
                            <div v-for="expedition in completedExpeditions" key="expedition.id">
                                <div class="well well-sm">
                                    <h4>{{expedition.contract.name}}
                                        <button v-if="expedition.success" type="button" class="btn btn-success pull-right" @click="claimReward(expedition)">
                                            Claim!
                                            <div v-if="expedition.contract.contractAmount != undefined">{{expedition.contract.contractAmount}} coins</div>
                                            <div v-for="reward in expedition.rewards">
                                                <div v-if="reward.amount">{{reward.amount}} {{reward.type}}</div>
                                                <div v-if="reward.type == 'item'">{{reward.item.name}}</div>
                                            </div>
                                        </button>
                                        <button v-if="!expedition.success" type="button" class="btn btn-danger pull-right" @click="removeExpedition(expedition)">Darnation!</button>
                                    </h4>
                                    <div>
                                        <span>{{expedition.completionMessage}}</span>
                                        <span v-if="expedition.awol" class="text-warning">{{expedition.contract.deathMessage}}</span>
                                        <ul>
                                            <li v-for="adventurer in expedition.adventurers">
                                                {{adventurer.type}} {{adventurer.status}}
                                                <span v-if="adventurer.awol" class="text-danger">didn't come back</span>
                                                <span v-if="adventurer.upgradedTo != undefined" class="text-success">has become a {{adventurer.upgradedTo}}</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </transition-group>
                    </div>
                    <div class="tab-pane fade" id="runningQuests">
                        <transition-group name="custom-classes-transition" enter-acti ve-class="animated fadeIn" leave-active-class="noOutAnimation">
                            <div v-for="expedition in runningExpeditions" key="expedition.id">
                                <div class="well well-sm">
                                    <h4>{{expedition.contract.name}}</h4>
                                    <ul>
                                        <li v-for="adventurer in expedition.adventurers">
                                            {{adventurer.type}} {{adventurer.status}} {{adventurer.awol}} {{adventurer.upgradedTo}}
                                        </li>
                                    </ul>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar" v-bind:style="{ width: expeditionProgress(expedition) + '%' }"></div>
                                    </div>
                                    <div v-bind:class="{ 'text-success': expiringDanger(expedition.expires), 'text-warning': expiringWarning(expedition.expires), 'text-danger': expiringSuccess(expedition.expires) }">{{readableTime(expedition.expires - Date.now())}} remaining</div>
                                </div>
                            </div>
                        </transition-group>
                    </div>
                    <div class="tab-pane fade" id="messages">
                        <!-- <div class="input">
                            <label>Filter
                                <input type="input" v-model="options.messagesFilter"/>
                            </label>
                        </div> -->
                        <table class="table table-striped table-hover ">
                            <tr v-for="message in messages">
                                <td>{{message.message}}</td>
                                <td>{{new Date(message.time).toLocaleString()}}</td>
                                <td>
                                    <button type="button" class="btn btn-danger btn-xs pull-right" @click="dismissMessage(message)">X
                                </td>
                            </tr>
                        </table>
                    </div>
                    <!-- EXAMPLE 
                        <div class="tab-pane fade" id="EXAMPLE">
                        <p>Food truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee squid. Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo
                            booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus mollit.</p>
                        </div> 
                    -->


                </div>
            </div>
        </div>
        <nav class="navbar navbar-default navbar-fixed-bottom" role="navigation">
            <div class="container">
                <ul class="nav navbar-nav">
                    <li><a href="#">{{coins}} coin<span v-if="coins != 1">s</span> <span class="pull-right">{{reknownText()}} <span class="text-muted">({{reknown}})</span></span></a></li>
                </ul>
            </div>
        </nav>
    </div>
</body>

</html>
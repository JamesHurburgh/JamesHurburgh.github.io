<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Adventurers of Otium</title>
    <link rel="icon" type="image/png" href="img/favicon.png">

    <script src="./js/lib/jquery.js"></script>
    <script src="./js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="css/alertify.min.css" />
    <!-- <link rel="stylesheet" href="css/bootstrap-glyphicons.min.css" /> -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">
    <!-- Alertify Bootstrap theme -->
    <link rel="stylesheet" href="css/alertify.bootstrap.min.css" />

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap.slate.min.css" />
    <link rel="stylesheet" href="css/animate.css" />

    <!--This sets the baseUrl to the "scripts" directory, and
    loads a script that will have a module ID of 'main'-->
    <script data-main="js/app/data.js" src="js/require.js"></script>
</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                <span class="navbar-brand" href="#">Otium Data</span>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="./" target="_blank">Game</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="https://jameshurburgh.github.io/about.html" target="_blank">About the Author</a></li>
                            <li><a href="https://www.patreon.com/bePatron?u=6205348" target="_blank">Become a Patron!</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container" style="padding-bottom: 65px; padding-top: 65px;">
        <div class="row">
            <div id="data">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#locations" data-toggle="tab" aria-expanded="true">Locations</a>
                    </li>
                    <li class="">
                        <a href="#adventurers" data-toggle="tab" aria-expanded="true">Adventurers</a>
                    </li>
                    <li class="">
                        <a href="#achievements" data-toggle="tab" aria-expanded="true">Achievements</a>
                    </li>
                    <li class="">
                        <a href="#contracts" data-toggle="tab" aria-expanded="true">Contracts</a>
                    </li>
                    <li class="">
                        <a href="#items" data-toggle="tab" aria-expanded="true">Items</a>
                    </li>
                    <li class="">
                        <a href="#races" data-toggle="tab" aria-expanded="true">Races</a>
                    </li>
                    <li class="">
                        <a href="#skills" data-toggle="tab" aria-expanded="true">Skills</a>
                    </li>
                </ul>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade active in" id="locations">
                        <div class="panel-group" id="locations-accordion">
                            <div v-for="location in locations" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#locations-accordion" :href="'#' + toId(location.name)">{{location.name}}</a>
                                    </h4>
                                </div>
                                <div :id="toId(location.name)" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="col-sm-6">
                                            <form class="form-horizontal">
                                                <fieldset>
                                                    <legend>Location</legend>
                                                    <div class="form-group">
                                                        <label for="description" class="col-lg-2 control-label">Description</label>
                                                        <div class="col-lg-10">
                                                            <textarea class="form-control" rows="5" id="description">{{location.description}}</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="renownRequired" class="col-lg-2 control-label">Renown Required</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="renownRequired" placeholder="0" v-model="location.renownRequired">
                                                        </div>
                                                    </div>
                                                    <legend>Free Coins</legend>
                                                    <div class="form-group">
                                                        <label for="freeCoinsDescription" class="col-lg-2 control-label">Description</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="freeCoinsDescription" placeholder="Get Coins" v-model="location.freeCoinsDescription">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="freeCoins" class="col-lg-2 control-label">Amount</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="freeCoins" placeholder="0" v-model="location.freeCoins">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="freeCoinsTimeout" class="col-lg-2 control-label">Timeout</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="freeCoinsTimeout" placeholder="0" v-model="location.freeCoinsTimeout">
                                                        </div>
                                                    </div>
                                                    <legend>Contracts</legend>
                                                    <ul>
                                                        <li v-for="contract in location.contracts">{{contract}}</li>
                                                    </ul>
                                                    <legend>Adventurers</legend>
                                                    <ul>
                                                        <li v-for="adventurer in location.adventurers">{{adventurer.type}} (Ratio:{{adventurer.chance}})</a>
                                                        </li>
                                                    </ul>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label for="json" class="col-lg-2 control-label">Json</label>
                                                <div class="col-lg-10">
                                                    <textarea class="form-control" style="height: 70vh;" id="json">{{location}}</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="contracts">
                        <div class="panel-group" id="contracts-accordion">
                            <div v-for="contract in contracts" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#contracts-accordion" :href="'#' + toId(contract.name)">{{contract.name}}</a>
                                        <button type="button" class="btn btn-info btn-xs pull-right" @click="exportData(contract, toId(contract.name));">Export</button>
                                        <button type="button" class="btn btn-info btn-xs pull-right" :disabled="contractIssues(contract).length !== 0" @click="postContract(contract, toId(contract.name));">Submit</button>
                                        <span v-if="contractIssues(contract).length !== 0" class="label label-warning pull-right">{{contractIssues(contract).length}} issues</span>
                                    </h4>
                                </div>
                                <div :id="toId(contract.name)" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="col-sm-12" v-if="contractIssues(contract).length > 0">{{contractIssues(contract)}}
                                        </div>
                                        <div class="col-sm-12">
                                            <form class="form-horizontal">
                                                <fieldset>
                                                    <div class="col-sm-6">
                                                        <legend>Basics</legend>
                                                        <div class="form-group">
                                                            <label for="name" class="col-lg-2 control-label">Name</label>
                                                            <div class="col-lg-10">
                                                                <input type="text" class="form-control" id="name" placeholder="Contract Name" v-model="contract.name">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="risk" class="col-lg-2 control-label">Risk</label>
                                                            <div class="col-lg-4">
                                                                <input type="text" class="form-control" id="risk" placeholder="0.5" v-model="contract.risk">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="duration" class="col-lg-2 control-label">Duration</label>
                                                            <div class="col-lg-4">
                                                                <input type="text" class="form-control" id="duration" placeholder="100" v-model="contract.duration">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="rewardFactor" class="col-lg-2 control-label">Reward</label>
                                                            <div class="col-lg-4">
                                                                <input type="text" class="form-control" id="rewardFactor" placeholder="0.5" v-model="contract.rewardFactor">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="experience" class="col-lg-2 control-label">Experience</label>
                                                            <div class="col-lg-4">
                                                                <input type="text" class="form-control" id="experience" placeholder="10" v-model="contract.experience">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="contractAmount" class="col-lg-2 control-label">Contract amount</label>
                                                            <div class="col-lg-4">
                                                                <input type="text" class="form-control" id="contractAmount" placeholder="10" v-model="contract.contractAmount">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="startTaskId" class="col-lg-2 control-label">Start Task Id</label>
                                                            <div class="col-lg-4">
                                                                <input type="text" class="form-control" id="startTaskId" placeholder="start" v-model="contract.startTaskId">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <legend>Messages</legend>
                                                        <div class="form-group">
                                                            <label for="successMessage" class="col-lg-2 control-label">Success</label>
                                                            <div class="col-lg-10">
                                                                <input type="text" class="form-control" id="successMessage" placeholder="Success!" v-model="contract.successMessage">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="failureMessage" class="col-lg-2 control-label">Failure</label>
                                                            <div class="col-lg-10">
                                                                <input type="text" class="form-control" id="failureMessage" placeholder="Failure!" v-model="contract.failureMessage">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="deathMessage" class="col-lg-2 control-label">Death</label>
                                                            <div class="col-lg-10">
                                                                <input type="text" class="form-control" id="deathMessage" placeholder="Death!" v-model="contract.deathMessage">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div class="col-sm-12">
                                            <legend>Tasks</legend>
                                            <table class="table table-striped table-hover ">
                                                <thead>
                                                    <tr style="overflow: auto;">
                                                        <th>Id</th>
                                                        <th>Name</th>
                                                        <th>Duration</th>
                                                        <th>Skill</th>
                                                        <th>Difficulty</th>
                                                        <th>Success</th>
                                                        <th>Fail</th>
                                                        <th>Retry</th>
                                                        <th>Injury</th>
                                                        <th>Required</th>
                                                    </tr>
                                                </thead>
                                                <tr v-for="task in contract.tasks" :class="{'info': contract.startTaskId == task.id, 'success': !task.taskAfterSuccess && !task.taskAfterFail }">
                                                    <td>{{task.id}}</td>
                                                    <td>{{task.name}}</td>
                                                    <td>{{task.duration}} seconds</td>
                                                    <td>
                                                        <img :alt="task.skillTest" width="24px" :src="'img/icons/' + getSkill(task.skillTest).icon + '.png'" />&nbsp; {{task.skillTest}}
                                                    </td>
                                                    <td>{{task.difficulty}}</td>
                                                    <td>{{task.taskAfterSuccess}}</td>
                                                    <td>{{task.taskAfterFail}}</td>
                                                    <td>{{task.retry}}</td>
                                                    <td>{{task.injuryType}}</td>
                                                    <td>{{task.required}}</td>
                                                </tr>
                                                <tfoot>
                                                    <tr v-if="input.newTask">
                                                        <td>
                                                            <input type="text" maxlength="10" style="width:75px;" v-model="input.newTask.id">
                                                        </td>
                                                        <td>
                                                            <input type="text" maxlength="50" size="20" v-model="input.newTask.name">
                                                        </td>
                                                        <td>
                                                            <input type="number" min="0" style="width:35px;" v-model="input.newTask.duration">
                                                        </td>
                                                        <td>
                                                            <select class="form-control" v-model="input.newTask.skillTest">
                                                                <option disabled value="">Please select one</option>
                                                                <option v-for="skill in skills">{{skill.name}}</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <input type="number" min="0" max="10" style="width:35px;" v-model="input.newTask.difficulty">
                                                        </td>
                                                        <td>
                                                            <input type="text" maxlength="10" style="width:75px;" v-model="input.newTask.taskAfterSuccess">
                                                        </td>
                                                        <td>
                                                            <input type="text" maxlength="10" style="width:75px;" v-model="input.newTask.taskAfterFail">
                                                        </td>
                                                        <td>
                                                            <input type="number" min="0" max="5" style="width:35px;" v-model="input.newTask.retry">
                                                        </td>
                                                        <td>
                                                            <input type="text" v-model="input.newTask.injuryType">
                                                        </td>
                                                        <td>
                                                            <input type="checkbox" v-model="input.newTask.required">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <button type="button" class="btn btn-success" @click="addNewTaskToContract(contract)">Add new task</button>
                                                        </td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="achievements">
                        <div class="panel-group" id="achievements-accordion">
                            <div v-for="achievement in achievements" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#achievements-accordion" :href="'#' + toId(achievement.name)">{{achievement.name}}</a>
                                    </h4>
                                </div>
                                <div :id="toId(achievement.name)" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="col-sm-6">
                                            <form class="form-horizontal">
                                                <fieldset>
                                                    <legend>Basics</legend>
                                                    <div class="form-group">
                                                        <label for="name" class="col-lg-2 control-label">Name</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="name" placeholder="Achievement Name" v-model="achievement.name">
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div class="col-sm-6">
                                            <legend>Json</legend>
                                            <textarea class="form-control" style="height: 70vh;" id="json">{{achievement}}}}</textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="items">
                        <div class="panel-group" id="items-accordion">
                            <div v-for="item in items" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#item-accordion" :href="'#' + toId(item.type)">{{item.type}}</a>
                                    </h4>
                                </div>
                                <div :id="toId(item.type)" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="col-sm-6">
                                            <form class="form-horizontal">
                                                <fieldset>
                                                    <legend>Basics</legend>
                                                    <div class="form-group">
                                                        <label for="name" class="col-lg-2 control-label">Name</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="name" placeholder="Item Name" v-model="item.name">
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div class="col-sm-6">
                                            <legend>Json</legend>
                                            <textarea class="form-control" style="height: 70vh;" id="json">{{item}}</textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="races">
                        <div class="panel-group" id="races-accordion">
                            <div v-for="race in races" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#race-accordion" :href="'#' + toId(race.name)">{{race.name}}</a>
                                    </h4>
                                </div>
                                <div :id="toId(race.name)" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="col-sm-6">
                                            <form class="form-horizontal">
                                                <fieldset>
                                                    <legend>Basics</legend>
                                                    <div class="form-group">
                                                        <label for="name" class="col-lg-2 control-label">Name</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="name" placeholder="Race Name" v-model="race.name">
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div class="col-sm-6">
                                            <legend>Json</legend>
                                            <textarea class="form-control" style="height: 70vh;" id="json">{{race}}</textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="adventurers">
                        <div class="panel-group" id="adventurers-accordion">
                            <div v-for="adventurer in adventurers" class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#adventurers-accordion" :href="'#' + toId(adventurer.name)">{{adventurer.name}}</a>
                                    </h4>
                                </div>
                                <div :id="toId(adventurer.name)" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="col-sm-6">
                                            <form class="form-horizontal">
                                                <fieldset>
                                                    <legend>Adventurer</legend>
                                                    <div class="form-group">
                                                        <label for="name" class="col-lg-2 control-label">Name</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="name" placeholder="Adventurer" v-model="adventurer.name">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="plural" class="col-lg-2 control-label">Plural</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="plural" placeholder="Adventurers" v-model="adventurer.plural">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="plural" class="col-lg-2 control-label">Cost</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="baseCost" placeholder="0" v-model="adventurer.baseCost">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="baseExperience" class="col-lg-2 control-label">Base XP</label>
                                                        <div class="col-lg-10">
                                                            <input type="text" class="form-control" id="baseExperience" placeholder="0" v-model="adventurer.baseExperience">
                                                        </div>
                                                    </div>
                                                    <legend>Skills</legend>
                                                    <span v-for="skill in adventurer.skills" :title="skill.name + ' ' + skill.amount">
                                                        <img :alt="skill.name" v-for="n in skill.amount" width="24px" :src="'img/icons/' + getSkill(skill.name).icon + '.png'" />
                                                    </span>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div class="col-sm-6">
                                            <legend>Json</legend>
                                            <textarea class="form-control" style="height: 70vh;" id="json">{{adventurer}}</textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="skills">
                        <ul>
                            <li v-for="skill in skills">
                                <img width="24px" :src="'img/icons/' + skill.icon + '.png'" /> {{skill.name}}
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>